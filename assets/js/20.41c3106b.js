(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{374:function(t,e,a){"use strict";a.r(e);var s=a(42),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-element-ui实现上传文件-el-upload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-element-ui实现上传文件-el-upload"}},[t._v("#")]),t._v(" vue+element-ui实现上传文件（el-upload）")]),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("一直以来就对上传文件的整个流程不太清楚，最近有时间刚好整理一下上传文件的过程，用的是vue+element-ui，后端是springboot架构。")]),t._v(" "),a("h2",{attrs:{id:"前端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端"}},[t._v("#")]),t._v(" 前端")]),t._v(" "),a("p",[t._v("先上图：\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201111170713738.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NDA5MjY0,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}}),t._v("\n解释一下：")]),t._v(" "),a("p",[a("strong",[t._v("limit")]),t._v("  限制单次上传文件的数量，超过这个数量的文件无法上传\n"),a("strong",[t._v("drag")]),t._v("  允许拖拽上传\n"),a("strong",[t._v("action")]),t._v("  上传文件的url地址，我这里是根据开发环境还是生产环境动态选择的地址\n"),a("strong",[t._v("accept")]),t._v("  接受的文件类型，这里控制的是在打开资源器时，显示的可选的文件类型，比如我这里是.der和.cer格式的文件，那么打开资源管理器之后，非der和cer的文件将不会显示\n"),a("strong",[t._v("data")]),t._v("  上传时可携带的参数，这里后台用map接收\n"),a("strong",[t._v("before-upload")]),t._v("  上传之前的钩子，可以用来做一些校验\n"),a("strong",[t._v("on-success")]),t._v("  上传成功之后的钩子，可以用来清除表单校验和文件列表\n"),a("strong",[t._v("on-error")]),t._v("  上传失败之后的钩子\n"),a("strong",[t._v("auto-upload")]),t._v("  选择文件之后是否立即上传")]),t._v(" "),a("p",[t._v("这里再贴一下我的"),a("strong",[t._v("action")]),t._v("的写法（要写在computed中）\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201111172642483.png#pic_center",alt:"在这里插入图片描述"}}),t._v("\n为什么要区分运行环境来使用不同的url？")]),t._v(" "),a("p",[t._v("因为开发环境是配置了代理的")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201111172922168.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NDA5MjY0,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}}),t._v('\n而这个值在开发环境中是"/dev-api",在生产环境是“/”')]),t._v(" "),a("p",[t._v('所以开发环境需要在开头加上"/dev-api"，生产环境则不需要')]),t._v(" "),a("p",[t._v("那为什么只有这一个要单独处理，其他的url不需要呢？因为其他的url是通过axios请求的，axios中配置了baseUrl，所以其他的url不需要单独处理了\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201111173431560.png#pic_center",alt:"在这里插入图片描述"}})]),t._v(" "),a("h2",{attrs:{id:"后端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[t._v("#")]),t._v(" 后端")]),t._v(" "),a("p",[t._v("现在来说下后端如何实现")]),t._v(" "),a("p",[t._v("我这个例子中前端会向后端传递两个参数，一个是data中的参数，另一个就是文件了，所以后端代码如下"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201111174009382.png#pic_center",alt:"在这里插入图片描述"}}),t._v("\n这是单次上传一个文件的情况，如果是多个文件，第二个参数就要用数组了（MultipartFile[]），\n接下来就可以根据自己的需要进行处理了。")]),t._v(" "),a("h2",{attrs:{id:"最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[t._v("#")]),t._v(" 最后")]),t._v(" "),a("p",[t._v("这是一个很简单的上传文件的流程了，不过el-upload还有很多的配置，附上el-upload的地址\nhttps://element.eleme.cn/#/zh-CN/component/upload")]),t._v(" "),a("p",[t._v("最好的资料莫过于官方文档了😁")])])}),[],!1,null,null,null);e.default=r.exports}}]);